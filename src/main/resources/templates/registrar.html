<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Insert title here</title>
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/jquery-ui.css">
<script src="/js/jquery-3.3.1.js"></script>
</head>
<body>
	<div class="container">
		<div class="jumbotron">
			<h1>Registrate.</h1>
		</div>
		<div class="container">
			<div class="card">
				<div class="card-body">
					<form action="usuario/agregar" method="post" name="form-registro">
						<div>
							<label for="nombre">Nombre:</label> <input type="text"
								id="nombre" name="nombre">
						</div>
						<div>
							<label for="usuario">Usuario:</label> <input type="text"
								id="usuario" name="usuario">
						</div>
						<div>
							<label for="pw">Password:</label> <input type="password" id="pw"
								name="pw">
						</div>
						<div>
							<button type="submit">Enviar</button>
						</div>
					</form>
					
					</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
	$(function() {
		$('button[type=submit]').click(function(e) {
			/*var datos = {
					nombre : document.getElementById("nombre").value,
					usuario: document.getElementById("usuario").value,
					pw : document.getElementById("pw").value
				};*/

			e.preventDefault();

			//Remove all errors
			$('input').next().remove();

			$.post({
				url : "usuario/agregar",
				data : $('form[name=form-registro]').serialize(),
				success : function(data, textStatus, xhr) {
					if (xhr.status == 200 && xhr.statusText == "success") {
						setTimeout(function() {
							window.location.href = "/login";
						}, 3000);

					}

				},
				error : function(data, textStatus, xhr) {
					console.log(data);
				},
				async : true,
				cache : false
			});

		});
	});
</script>

</html>